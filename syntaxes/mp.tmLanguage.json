{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"scopeName": "source.mp",
	"name": "MP",
	"injectionsSelector": "L:comment.block",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"match": "(\\s*<!--\\s*)(MPIF|MPELSEIF|MPELSE|MPLOOP|MPVAR|MPBLOCK|MPFUNCTION|MPLIB|MPINIT|MPBREAK|\\$INCLUDE)\\s*(:)?(.*)?(\\s*-->)",
			"captures": {
				"0": {"name": "meta.embedded.inline.mp"},
				"1": {"name": "punctuation.definition.tag.begin.mp"},
				"2": {
					"name": "keyword.control.mp",
					"patterns": [{
						"match": ".*",
						"name": "entity.name.selector.mp"
					}]
				},
				"3": {"name": "punctuation.separator.mp"},
				"4": {
					"name": "meta.embedded.block.perl",
					"patterns": [{
						"include": "source.perl"
					}]
				 },
				"5": {"name": "punctuation.definition.tag.end.mp"}
			}
		},
		{
			"match": "(\\s*<!--\\s*)(MPENDIF|MPENDLOOP|MPENDVAR|MPENDBLOCK)\\s*(:)?(.*)?(\\s*-->)",
			"captures": {
				"0": {"name": "meta.embedded.inline.mp"},
				"1": {"name": "punctuation.definition.tag.begin.mp"},
				"2": {
					"name": "keyword.control.mp"
				},
				"3": {"name": "punctuation.separator.mp"},
				"4": {
					"name": "meta.embedded.block.perl.mp",
					"patterns": [{
						"include": "source.perl"
					}]
				 },
				"5": {"name": "punctuation.definition.tag.end.mp"}
			}
		},{
			"match": ".*",
			"patterns": [{
				"include": "source.html"
			}]

		}
	],
	"repository": {
        "comments": {
            "patterns": [{
                    "begin": "/\\*",
                    "captures": {
                      "0":{"name": "punctuation.definition.comment.mp"}
                    },
                    "end": "\\*/",
                    "name": "comment.block.mp"
            }]
        }
    }
}